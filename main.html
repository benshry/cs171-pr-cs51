<!DOCTYPE html>
<html>
<head lang="en">
    <meta charset="UTF-8">

    <script src="libs/d3/d3.min.js" charset="utf-8"></script>
    <script src="libs/jquery/jquery-2.1.1.min.js" charset="utf-8"></script>
    <script src="libs/bootstrap/js/bootstrap.min.js" charset="utf-8"></script>
    <script src="js/gradesvis.js"></script>
    <script src="js/comfortvis.js"></script>
    <script src="js/classvis.js"></script>
    <script src="js/piazzavis.js"></script>

    <link rel="stylesheet" type="text/css" href="libs/bootstrap/css/bootstrap.min.css">
    <link rel="stylesheet" type="text/css" href="css/myStyle.css">
    <link href='http://fonts.googleapis.com/css?family=PT+Sans:400,700' rel='stylesheet' type='text/css'>

</head>

<body>
    <div class="container">
        <h1>Lorem Ipsum</h1>
        <div class="row">
            <div class="col-md-8 col-sm-12">
               <p> Lorem Ipsum</p>
            </div>
        </div>

        <div class="row">
            <div class="col-md-6" id="gradesVis"></div>
            <div class="col-md-6" id="comfortVis"></div>
        </div>

        <div class="row">
            <div class="col-md-6" id="classVis"></div>
            <div class="col-md-6" id="piazzaVis"></div>
        </div>
    </div>

    <script>
        $(function() {

            // Namespace
            var AllData = [];
            var MetaData = {};

            // Initialize visualization with data in AllData and MetaData
            var initVis = function() {

                // Create an eventHandler
                var MyEventHandler = new Object();

                // Instantiate all Vis Objects here
                var grades_vis = new GradesVis(d3.select("#gradesVis"), AllData, MetaData, MyEventHandler);
                var comfort_vis = new ComfortVis(d3.select("#comfortVis"), AllData, MetaData);
                var class_vis = new ClassVis(d3.select("#classVis"), AllData, MetaData);
                var piazza_vis = new PiazzaVis(d3.select("#piazzaVis"), AllData, MetaData);

                // cs171: bind the eventHandler to the Vis Objects
                // events will be created from the CountVis object (nothing to do here)
                // events will be consumed by the PrioVis and AgeVis object (binding should happen here)
                $(MyEventHandler).bind("selectionChanged", function(e, o) {
                  comfort_vis.onSelectionChange(o.min, o.max);
                  class_vis.onSelectionChange(o.min, o.max);
                  piazza_vis.onSelectionChange(o.min, o.max);
                });

            }

            var start = function(){
                d3.json("output/parsed.json", function(error, data) {
                    if (!error) {
                      AllData = data;
                    }
                    initVis();
                });
            }

            start();

        })
    </script>
</body>
</html>
